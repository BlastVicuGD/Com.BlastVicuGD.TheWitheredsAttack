<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Withered's Attack</title>
    <style>
        body { background: #000; color: #fff; font-family: 'Courier New', Courier, monospace; margin: 0; overflow: hidden; display: flex; justify-content: center; align-items: center; height: 100vh; }
        #game-container { width: 800px; height: 600px; background: #111; border: 4px solid #333; position: relative; overflow: hidden; }
        .screen { width: 100%; height: 100%; position: absolute; display: none; }
        .active { display: block; }
        
        /* HUD UI */
        .btn-door { position: absolute; width: 60px; height: 60px; background: red; top: 50%; transform: translateY(-50%); border: 2px solid #fff; cursor: pointer; z-index: 10; }
        #door-left { left: 20px; }
        #door-right { right: 20px; }
        
        #btn-mask { position: absolute; bottom: 20px; left: 20px; width: 150px; height: 50px; background: #444; border: 2px solid #888; z-index: 20; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        #btn-cams { position: absolute; bottom: 20px; right: 20px; width: 150px; height: 50px; background: #444; border: 2px solid #888; z-index: 20; display: flex; align-items: center; justify-content: center; cursor: pointer; }
        
        #mask-overlay { position: absolute; width: 100%; height: 100%; background: rgba(30, 0, 0, 0.7); display: none; z-index: 15; pointer-events: none; border: 40px solid #000; box-sizing: border-box; }

        /* Monitor de Cámaras */
        #camera-monitor { position: absolute; width: 100%; height: 100%; background: #000; z-index: 30; display: none; }
        #cam-map { position: absolute; bottom: 20px; left: 20px; width: 300px; height: 150px; border: 2px solid #fff; display: grid; grid-template-columns: repeat(3, 1fr); gap: 5px; padding: 5px; }
        .cam-btn { background: #222; border: 1px solid #fff; color: #fff; font-size: 10px; cursor: pointer; }
        .cam-active { background: #fff; color: #000; }

        /* Cocina */
        #kitchen-controls { position: absolute; top: 20px; left: 50%; transform: translateX(-50%); text-align: center; }
        .btn-action { padding: 10px; background: green; color: white; border: none; margin: 5px; cursor: pointer; }

        /* Menu */
        .menu-item { cursor: pointer; padding: 10px; font-size: 24px; text-transform: uppercase; }
        .menu-item:hover { color: #ff0000; }
    </style>
</head>
<body>

<div id="game-container">
    <!-- MENU PRINCIPAL -->
    <div id="menu-screen" class="screen active">
        <h1 style="text-align: center; margin-top: 100px;">THE WITHERED'S ATTACK</h1>
        <div style="margin-left: 50px; margin-top: 150px;">
            <div class="menu-item" onclick="startGame(1)">« New Game</div>
            <div class="menu-item" onclick="loadGame()">« Continue</div>
            <div class="menu-item" onclick="openCustomNight()">« Custom Night</div>
        </div>
    </div>

    <!-- OFICINA -->
    <div id="office-screen" class="screen">
        <div id="mask-overlay"></div>
        <div id="door-left" class="btn-door" onclick="toggleDoor('left')"></div>
        <div id="door-right" class="btn-door" onclick="toggleDoor('right')"></div>
        
        <div id="office-view" style="text-align: center; margin-top: 200px;">
            <h2 id="office-info">CENTRAL HALL</h2>
            <div id="animatronic-in-hall" style="font-size: 40px; color: red;"></div>
        </div>

        <div id="btn-mask" onclick="toggleMask()">MASK</div>
        <div id="btn-cams" onclick="toggleCams()">CAMERAS</div>
    </div>

    <!-- MONITOR DE CÁMARAS -->
    <div id="camera-monitor">
        <div id="cam-view" style="width: 100%; height: 70%; display: flex; align-items: center; justify-content: center; background: #111;">
            <h1 id="cam-name">SHOW STAGE</h1>
        </div>
        
        <div id="kitchen-controls" style="display:none;">
            <button class="btn-action" onclick="cookPizza()">COOK PIZZA</button>
            <button id="btn-sprinkles" class="btn-action" style="background: blue; display:none;" onclick="useSprinklers()">SPRINKLES</button>
        </div>

        <div id="cam-map">
            <button class="cam-btn" onclick="switchCam(1, 'Show Stage')">CAM 1</button>
            <button class="cam-btn" onclick="switchCam(5, 'Parts & Service')">CAM 5</button>
            <button class="cam-btn" onclick="switchCam(2, 'Pirate Cove')">CAM 2</button>
            <button class="cam-btn" onclick="switchCam(8, 'East Hall')">CAM 8</button>
            <button class="cam-btn" onclick="switchCam(4, 'Central Hall')">CAM 4</button>
            <button class="cam-btn" onclick="switchCam(9, 'West Hall')">CAM 9</button>
            <button class="cam-btn" onclick="switchCam(7, 'Bathrooms')">CAM 7</button>
            <button class="cam-btn" onclick="switchCam(6, 'Down Stage')">CAM 6</button>
            <button class="cam-btn" onclick="switchCam(3, 'Kitchen')">CAM 3</button>
        </div>
        <div id="btn-close-cams" style="position: absolute; bottom: 20px; right: 20px; width: 150px; height: 50px; background: #444; border: 2px solid #888; display: flex; align-items: center; justify-content: center; cursor: pointer;" onclick="toggleCams()">CLOSE</div>
    </div>
</div>

<script>
    // VARIABLES DE ESTADO
    let currentNight = 1;
    let maskOn = false;
    let camsOn = false;
    let doorLeft = false;
    let doorRight = false;
    let currentCam = 1;
    let pizzaTimer = 100;
    let isFire = false;
    let gfCamCount = 0;
    
    // IA CONFIG (Dificultad 0-20)
    let IA = { bonnie: 0, chica: 0, foxy: 0, freddy: 0, golden: 0 };

    function startGame(night) {
        currentNight = night;
        setupNight(night);
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById('office-screen').classList.add('active');
        gameLoop();
    }

    function setupNight(n) {
        if(n === 1) IA = { bonnie: 3, chica: 0, foxy: 0, freddy: 0, golden: 0 };
        if(n === 5) IA = { bonnie: 10, chica: 10, foxy: 12, freddy: 12, golden: 15 };
        // Implementar resto de noches...
    }

    function toggleMask() {
        if (camsOn) return;
        maskOn = !maskOn;
        document.getElementById('mask-overlay').style.display = maskOn ? 'block' : 'none';
    }

    function toggleCams() {
        if (maskOn) return;
        camsOn = !camsOn;
        document.getElementById('camera-monitor').style.display = camsOn ? 'block' : 'none';
        
        if (camsOn) {
            gfCamCount++;
            checkGoldenFreddy();
        }
    }

    function switchCam(id, name) {
        currentCam = id;
        document.getElementById('cam-name').innerText = name;
        document.getElementById('kitchen-controls').style.display = (id === 3) ? 'block' : 'none';
    }

    function cookPizza() {
        pizzaTimer = 100;
        console.log("Pizza cocinada");
    }

    function useSprinklers() {
        if (isFire) {
            isFire = false;
            document.getElementById('btn-sprinkles').style.display = 'none';
            alert("Incendio apagado");
        }
    }

    function toggleDoor(side) {
        if (side === 'left') {
            doorLeft = !doorLeft;
            document.getElementById('door-left').style.background = doorLeft ? 'blue' : 'red';
        } else {
            doorRight = !doorRight;
            document.getElementById('door-right').style.background = doorRight ? 'blue' : 'red';
        }
    }

    function checkGoldenFreddy() {
        let limit = 50;
        if (IA.golden >= 20) limit = 1;
        else if (IA.golden >= 15) limit = 15;
        else if (IA.golden >= 10) limit = 30;

        if (gfCamCount >= limit && IA.golden > 0) {
            alert("GOLDEN FREDDY APARECIÓ - ¡USA LA MÁSCARA!");
            gfCamCount = 0;
        }
    }

    // Loop de juego básico (Simulación)
    function gameLoop() {
        setInterval(() => {
            // Lógica de Cocina
            if (!camsOn || currentCam !== 3) {
                pizzaTimer -= 0.5;
            }
            if (pizzaTimer <= 0 && !isFire) {
                isFire = true;
                document.getElementById('btn-sprinkles').style.display = 'block';
                console.log("¡INCENDIO EN LA COCINA!");
            }

            // Aquí se añadiría la lógica de movimiento de Bonnie, Chica, etc.
        }, 1000);
    }

    function openCustomNight() {
        alert("Modo Custom Night: Freddy: " + IA.freddy + " Bonnie: " + IA.bonnie + "...");
    }

    function loadGame() {
        const saved = localStorage.getItem('withered_attack_night');
        if (saved) startGame(parseInt(saved));
        else alert("No hay partida guardada");
    }
</script>
</body>
</html>
