<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Withered's Attack - Cam System</title>
    <style>
        :root { --red-alert: #ff0000; --lcd-green: #00ff41; }
        body { margin: 0; background: #000; color: #fff; font-family: 'Courier New', monospace; overflow: hidden; }

        /* VISTA DE LA OFICINA */
        #office-view { position: relative; width: 100vw; height: 100vh; background: #1a1a1a; display: flex; align-items: center; justify-content: center; }
        
        /* BOTONES PRINCIPALES */
        #btn-mask, #btn-cam { 
            position: absolute; bottom: 20px; width: 140px; height: 70px; 
            z-index: 500; color: white; cursor: pointer; border: 2px solid #fff;
            background: rgba(50, 50, 50, 0.9); font-weight: bold;
        }
        #btn-mask { left: 20px; }
        #btn-cam { right: 20px; border-color: var(--lcd-green); }

        /* MONITOR DE CÁMARAS */
        #monitor { 
            position: absolute; top: 100%; left: 0; width: 100%; height: 100%; 
            background: #050505; z-index: 600; transition: top 0.3s ease-out;
            border-top: 5px solid #444;
        }
        #monitor.open { top: 0; } /* Animación de apertura */

        /* INTERFAZ DE CÁMARAS */
        #cam-overlay { position: absolute; top: 20px; left: 20px; z-index: 10; }
        #cam-scanner { font-weight: bold; }

        /* MAPA Y NODOS */
        #map { 
            position: absolute; bottom: 20px; right: 20px; width: 260px; height: 220px; 
            border: 2px solid #fff; background: rgba(0,0,0,0.8); 
        }
        .cam-node { 
            position: absolute; width: 40px; height: 30px; background: #222; 
            border: 1px solid #fff; color: #fff; cursor: pointer; font-size: 12px;
        }
        /* Clase para la cámara que está seleccionada actualmente */
        .cam-node.active { 
            background: var(--lcd-green) !important; 
            color: #000 !important; 
            font-weight: bold;
            box-shadow: 0 0 10px var(--lcd-green);
        }

        /* EFECTO DE ESTÁTICA */
        .static {
            position: absolute; top: 0; left: 0; width: 100%; height: 100%;
            background: url('media.giphy.com');
            opacity: 0.05; pointer-events: none;
        }
    </style>
</head>
<body>

    <div id="office-view">
        <h2 style="color: #333;">VISTA DE LA OFICINA</h2>
        
        <button id="btn-mask" onclick="toggleMask()">MÁSCARA</button>
        <button id="btn-cam" onclick="toggleMonitor()">CÁMARAS</button>

        <!-- SISTEMA DE CÁMARAS -->
        <div id="monitor">
            <div class="static"></div>
            <div id="cam-overlay">
                <h1 id="cam-id" style="color: var(--lcd-green); margin: 0;">CAM 01</h1>
                <h3 id="cam-name">SHOW STAGE</h3>
                <p>ESTADO: <span id="cam-scanner" style="color: var(--lcd-green);">LIMPIO</span></p>
            </div>

            <div id="map">
                <!-- Botones del Mapa con IDs para identificarlos -->
                <button id="node-1" class="cam-node active" style="top:10px; left:10px;" onclick="changeCam(1, 'SHOW STAGE')">01</button>
                <button id="node-7" class="cam-node" style="top:10px; left:60px;" onclick="changeCam(7, 'DINING AREA')">07</button>
                <button id="node-8" class="cam-node" style="top:10px; right:10px;" onclick="changeCam(8, 'PARTS/SERVICE')">08</button>
                <button id="node-2" class="cam-node" style="top:50px; left:10px;" onclick="changeCam(2, 'PIRATE COVE')">02</button>
                <button id="node-5" class="cam-node" style="top:50px; left:60px;" onclick="changeCam(5, 'KITCHEN')">05</button>
                <button id="node-4" class="cam-node" style="top:90px; left:60px;" onclick="changeCam(4, 'CENTRAL HALL')">04</button>
                <button id="node-3" class="cam-node" style="top:130px; left:10px;" onclick="changeCam(3, 'WEST HALL')">03</button>
                <button id="node-9" class="cam-node" style="top:130px; left:60px;" onclick="changeCam(9, 'THE OFFICE')">09</button>
                <button id="node-6" class="cam-node" style="top:130px; right:10px;" onclick="changeCam(6, 'EAST HALL')">06</button>
            </div>
        </div>
    </div>

<script>
    // Estado inicial
    let game = { mon: false, mask: false, curCam: 1 };
    
    // Posiciones de los animatrónicos (para probar el scanner)
    let animPos = { 
        bonnie: 'cam01', 
        chica: 'cam08', 
        freddy: 'cam01' 
    };

    // FUNCIÓN: ABRIR/CERRAR MONITOR
    function toggleMonitor() {
        if (game.mask) return; // No se abren cámaras con máscara
        game.mon = !game.mon;
        const monDiv = document.getElementById('monitor');
        
        if (game.mon) {
            monDiv.classList.add('open');
            updateCamData(); 
        } else {
            monDiv.classList.remove('open');
        }
    }

    // FUNCIÓN: CAMBIAR DE CÁMARA
    function changeCam(id, name) {
        game.curCam = id;
        
        // 1. Actualizar textos
        document.getElementById('cam-id').innerText = `CAM 0${id}`;
        document.getElementById('cam-name').innerText = name;

        // 2. Actualizar visual de los botones (Nodos)
        document.querySelectorAll('.cam-node').forEach(node => node.classList.remove('active'));
        document.getElementById(`node-${id}`).classList.add('active');

        // 3. Revisar si hay animatrónicos
        updateCamData();
    }

    // FUNCIÓN: DETECTAR ENTIDADES
    function updateCamData() {
        let present = [];
        for (let anim in animPos) {
            if (animPos[anim] === `cam0${game.curCam}`) {
                present.push(anim.toUpperCase());
            }
        }

        const scanner = document.getElementById('cam-scanner');
        if (present.length > 0) {
            scanner.innerText = "MOVIMIENTO: " + present.join(" & ");
            scanner.style.color = "var(--red-alert)";
        } else {
            scanner.innerText = "SISTEMA LIMPIO";
            scanner.style.color = "var(--lcd-green)";
        }
    }

    function toggleMask() {
        if (game.mon) return;
        game.mask = !game.mask;
        document.getElementById('btn-mask').style.background = game.mask ? "red" : "rgba(50,50,50,0.9)";
    }
</script>

</body>
</html>
