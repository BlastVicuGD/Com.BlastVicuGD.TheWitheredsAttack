<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>The Withered's Attack: 9 Cams Edition</title>
    <style>
        :root { --green: #00ff41; --red: #ff0000; --gold: #ffd700; }
        * { box-sizing: border-box; touch-action: none; user-select: none; }
        body { margin: 0; background: #000; color: #fff; font-family: 'Courier New', monospace; overflow: hidden; }

        .screen { position: absolute; width: 100vw; height: 100vh; display: none; }
        .active-flex { display: flex !important; flex-direction: column; align-items: center; justify-content: center; }

        /* --- OFICINA --- */
        #office { background: #1a1a1a; }
        #cam-trigger { position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%); width: 300px; height: 50px; background: rgba(0, 0, 0, 0.7); border: 2px solid var(--green); cursor: pointer; }

        /* --- MONITOR 4:3 Y POSICIÓN ALTA --- */
        #monitor { 
            position: absolute; top: -100vh; left: 0; width: 100vw; height: 100vh;
            background: rgba(0,0,0,0.95); z-index: 1000; transition: top 0.4s;
            display: flex; justify-content: center;
        }
        #monitor.open { top: 0; }

        #cam-screen-43 {
            width: 100%; max-width: 100vh; /* Mantener proporción cercana a 4:3 */
            height: 75vh; margin-top: 10vh; /* Abre en la parte alta de la pantalla */
            background: #050505; border: 5px solid #222;
            position: relative;
        }

        /* --- UI CÁMARA --- */
        #cam-info { position: absolute; top: 10px; left: 10px; color: var(--green); }
        #status-scanner { background: #000; padding: 5px; }
        
        /* Botón de Cerrar Cámaras */
        #close-cams { 
            position: absolute; top: 10px; right: 10px; 
            width: 150px; height: 40px; background: var(--red); 
            border: 2px solid #fff; color: white; cursor: pointer; 
            font-weight: bold;
        }

        /* --- MAPA Y NODOS --- */
        #map { position: absolute; bottom: 10px; left: 10px; width: 280px; height: 200px; border: 1px solid #444; background: rgba(0,0,0,0.7); }
        .cam-node { position: absolute; width: 45px; height: 30px; background: #333; border: 1px solid #fff; font-size: 10px; cursor: pointer; }
        .cam-node.active { background: var(--green) !important; color: #000; box-shadow: 0 0 8px var(--green); }

    </style>
</head>
<body>

    <!-- Menús y Newspaper del código anterior aquí... -->
    <div id="office" class="screen active-flex">
        <!-- Controles de oficina (puertas, mascara) del código anterior aquí... -->
        <button id="cam-trigger" onclick="game.toggleMonitor()">▲ CÁMARAS ▲</button>

        <!-- MONITOR DE CÁMARAS -->
        <div id="monitor">
            <div id="cam-screen-43">
                <div id="cam-info">
                    <h2 id="cam-id" style="margin:0;">CAM 1A</h2>
                    <p id="cam-name" style="margin:0;">Scenario</p>
                    <p id="status-scanner">SCANNING: NONE</p>
                </div>
                
                <!-- Botón de Cerrar Cámaras -->
                <button id="close-cams" onclick="game.toggleMonitor()">CERRAR CÁMARAS</button>

                <!-- MAPA DE CÁMARAS -->
                <div id="map">
                    <!-- Ubicación exacta de las 9 cámaras según tu solicitud -->
                    <!-- Scenario (1A) - Arriba al centro/izquierda -->
                    <button id="node-1A" class="cam-node active" style="top:10px; left: 35%;" onclick="game.changeCam('1A', 'Scenario')">1A</button>
                    <!-- Parts And Service (1B) - Arriba a la derecha -->
                    <button id="node-1B" class="cam-node" style="top:10px; right:10px;" onclick="game.changeCam('1B', 'Parts And Service')">1B</button>
                    
                    <!-- East Hall (2A) - Centro izquierda -->
                    <button id="node-2A" class="cam-node" style="top:60px; left:10px;" onclick="game.changeCam('2A', 'East Hall')">2A</button>
                    <!-- Central Hall (2B) - Centro de todo (Pasillo) -->
                    <button id="node-2B" class="cam-node" style="top:60px; left: 40%;" onclick="game.changeCam('2B', 'Central Hall')">2B</button>
                    <!-- West Hall (3A) - Centro derecha -->
                    <button id="node-3A" class="cam-node" style="top:60px; right:10px;" onclick="game.changeCam('3A', 'West Hall')">3A</button>

                    <!-- Down Scenario (5A) - Abajo derecha (Cerca de Office) -->
                    <button id="node-5A" class="cam-node" style="top:110px; right:10px;" onclick="game.changeCam('5A', 'Down Scenario')">5A</button>
                    <!-- Food Place (3B) - Abajo centro (Donde chica hace ruido) -->
                    <button id="node-3B" class="cam-node" style="top:110px; left: 40%;" onclick="game.changeCam('3B', 'Food Place')">3B</button>
                    
                    <!-- Pirate Cove (4) - Abajo izquierda (Más arriba que East Hall) -->
                    <button id="node-4" class="cam-node" style="top:110px; left:10px;" onclick="game.changeCam('4', 'Pirate Cove')">4</button>

                    <!-- Office (5B) - Esquina inferior derecha (Tu posición) -->
                    <button id="node-5B" class="cam-node" style="bottom:10px; right:10px;" onclick="game.changeCam('5B', 'Office/You')">5B</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Custom Night del código anterior aquí... -->

<script>
    // Lógica del juego y flujo (flow, game.init, setDifficulty, etc) del código anterior va aquí...
    // Sustituyo las funciones de cámara por las nuevas que usan IDs alfanuméricos

    const game = {
        active: false, bat: 100, hr: 0, mon: false, mask: false, dL: false, dR: false, ia: {},
        curCam: '1A', // Usamos string para ID de cámara
        animPos: { bonnie: '1A', chica: '3B', freddy: '1B', foxy: '4' }, // Posiciones de prueba

        // ... init(), setDifficulty(), runLoops(), jumpscare(), victory() ...

        toggleMonitor() {
            if(this.mask) return;
            this.mon = !this.mon;
            document.getElementById('monitor').classList.toggle('open');
            if(this.mon) this.updateCamInfo();
            // Lógica Golden Freddy (si aplica)
        },

        changeCam(id, name) {
            this.curCam = id;
            document.getElementById('cam-id').innerText = `CAM ${id}`;
            document.getElementById('cam-name').innerText = name;
            
            // Actualizar botón activo
            document.querySelectorAll('.cam-node').forEach(node => node.classList.remove('active'));
            document.getElementById(`node-${id}`).classList.add('active');

            this.updateCamInfo();
        },

        updateCamInfo() {
            let detected = [];
            for (let anim in this.animPos) {
                if (this.animPos[anim] === this.curCam) {
                    detected.push(anim.toUpperCase());
                }
            }

            const scanner = document.getElementById('status-scanner');
            if (detected.length > 0) {
                scanner.innerText = `SCANNING: ${detected.join(" & ")}`;
                scanner.style.color = var(--red);
            } else {
                scanner.innerText = "SCANNING: NONE";
                scanner.style.color = var(--green);
            }
        },
        
        // ... (resto de funciones como toggleDoor, toggleMask)
    };

    // Esto solo inicializa la interfaz visual del menú
    // Debes pegar la lógica completa del juego del mensaje anterior aquí para que funcione
</script>
</body>
</html>
